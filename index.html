<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Southern Table</title>
<style>
/* Combined Styling */
body {
  font-family: 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  padding: 20px;
  background: #800020;
  color: #fff;
}
h1,h2{font-family:'Gill Sans','Segoe UI',Helvetica,Arial,sans-serif;font-weight:700;color:#000;text-align:center;letter-spacing:0.5px;}
p,label,span{color:#fff;font-weight:400;}
.section{background:#900030;padding:20px;margin-bottom:30px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.2);font-size:15px;}
img.logo,.item img{max-width:200px;display:block;margin:10px auto;}
.item{background:#b03040;padding:15px;margin-bottom:20px;border-radius:8px;border:1px solid #ccc;font-family:'Gill Sans','Segoe UI',Helvetica,Arial,sans-serif;}
button{padding:10px 20px;cursor:pointer;border-radius:5px;border:2px solid gold;background:#800020;color:#fff;font-weight:600;font-family:'Segoe UI',Helvetica,Arial,sans-serif;}
button:hover{background:#900030;border-color:#ffd700;}
input,textarea,select{display:block;width:100%;margin-top:5px;padding:8px;border-radius:5px;border:1px solid #ccc;font-family:'Segoe UI',Helvetica,Arial,sans-serif;}
table{width:100%;border-collapse:collapse;background:#fff;color:#000;font-family:'Gill Sans','Segoe UI',Helvetica,Arial,sans-serif;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
#hoodiesList,#exclusivesList,#hoodiesContainer,#exclusivesContainer{max-height:400px;overflow-y:auto;}
</style>
</head>
<body>

<!-- Login Section -->
<div id="loginScreen" class="section">
  <h1>Welcome to The Southern Table</h1>
  <p>Admin? Enter your credentials below. Customers can scroll down.</p>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button id="loginBtn">Login</button>
</div>

<!-- Admin Panel -->
<div id="adminPanel" style="display:none;">
  <h1>The Southern Table - Admin Dashboard</h1>

  <!-- Logo -->
  <div class="section">
    <h2>Edit Logo</h2>
    <input type="file" id="logoUpload" accept="image/*">
    <img id="logoPreview" src="">
  </div>

  <!-- About -->
  <div class="section">
    <h2>Edit Mission & Goal</h2>
    <textarea id="aboutText" rows="4">Mission & Goal content editable via admin.</textarea>
  </div>

  <!-- FAQ -->
  <div class="section">
    <h2>Edit FAQ</h2>
    <textarea id="faqText" rows="4">Typical questions about orders, delivery, payment.</textarea>
  </div>

  <!-- Hoodies -->
  <div class="section">
    <h2>Manage Hoodies</h2>
    <button id="addHoodieBtn">Add Hoodie</button>
    <div id="hoodiesContainer"></div>
  </div>

  <!-- Exclusives -->
  <div class="section">
    <h2>Manage Exclusives</h2>
    <button id="addExclusiveBtn">Add Exclusive Item</button>
    <div id="exclusivesContainer"></div>
  </div>

  <!-- Orders Summary -->
  <div class="section">
    <h2>Orders Summary</h2>
    <p>Total Orders: <span id="totalOrders">0</span></p>
    <p>Total Revenue: $<span id="totalRevenue">0</span></p>
    <p>Total Hoodies Sold: <span id="totalHoodies">0</span></p>
    <p>Total Exclusives Sold: <span id="totalExclusives">0</span></p>
  </div>

  <!-- Orders Log Table -->
  <div class="section">
    <h2>Orders Log</h2>
    <table id="ordersTable">
      <thead>
        <tr><th>Timestamp</th><th>Type</th><th>Item Name</th><th>Quantity</th><th>Price</th><th>Delivery/Pickup</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <button id="saveBtn">Save All Changes</button>
</div>

<!-- Customer App -->
<div id="customerApp">
  <img id="logo" class="logo" src="default-logo.png" alt="Logo">

  <div class="section">
    <h2>Mission & Goal</h2>
    <div id="about">Mission & Goal content editable via admin.</div>
  </div>

  <div class="section">
    <h2>Hoodies</h2>
    <div id="hoodiesList"></div>
  </div>

  <div class="section">
    <h2>Exclusives</h2>
    <div id="exclusivesList"></div>
  </div>

  <div class="section">
    <h2>FAQ</h2>
    <div id="faq">Typical questions about orders, delivery, payment.</div>
  </div>
</div>

<script>
// --- Combined JS ---
const ADMIN_USER="The Southern Table";
const ADMIN_PASS="Crunchy Thangs";

// Login
document.getElementById('loginBtn').addEventListener('click',()=>{
  const user=document.getElementById('username').value;
  const pass=document.getElementById('password').value;
  if(user===ADMIN_USER && pass===ADMIN_PASS){
    document.getElementById('loginScreen').style.display='none';
    document.getElementById('customerApp').style.display='none';
    document.getElementById('adminPanel').style.display='block';
    loadAdminData();
    refreshOrders();
  } else { alert('Incorrect username or password'); }
});

// Admin Data
let hoodies=[],exclusives=[];
function loadAdminData(){
  ['aboutText','faqText','logoPreview'].forEach(sec=>{
    const stored=localStorage.getItem(sec);
    if(stored){ if(sec==='logoPreview') document.getElementById(sec).src=stored; else document.getElementById(sec).value=stored; }
  });
  hoodies=JSON.parse(localStorage.getItem('hoodiesItems'))||[];
  exclusives=JSON.parse(localStorage.getItem('exclusivesItems'))||[];
  renderItems();
}

document.getElementById('logoUpload').addEventListener('change',function(e){
  const file=e.target.files[0];
  if(file){ const reader=new FileReader(); reader.onload=e=>{document.getElementById('logoPreview').src=e.target.result;}; reader.readAsDataURL(file); }
});

function createItemHTML(item,index,type){
  const container=document.createElement('div');
  container.style.border="1px solid #ccc"; container.style.padding="10px"; container.style.marginTop="10px"; container.style.borderRadius="5px";
  container.innerHTML=`
    <label>Name:</label><input type="text" value="${item.name}" class="itemName">
    <label>Description:</label><textarea class="itemDesc">${item.desc}</textarea>
    <label>Price:</label><input type="text" value="${item.price}" class="itemPrice">
    <label>Image:</label><input type="file" accept="image/*" class="itemImageUpload">
    <img src="${item.img}" class="itemImagePreview">
    <button class="removeBtn">Remove</button>
  `;
  const imgInput=container.querySelector('.itemImageUpload');
  const imgPreview=container.querySelector('.itemImagePreview');
  imgInput.addEventListener('change',e=>{const file=e.target.files[0]; if(file){ const reader=new FileReader(); reader.onload=e=>{imgPreview.src=e.target.result;}; reader.readAsDataURL(file); }});
  container.querySelector('.removeBtn').addEventListener('click',()=>{container.remove(); if(type==='hoodies') hoodies.splice(index,1); if(type==='exclusives') exclusives.splice(index,1);});
  return container;
}

function renderItems(){
  const hc=document.getElementById('hoodiesContainer');
  hc.innerHTML=''; hoodies.forEach((item,i)=>hc.appendChild(createItemHTML(item,i,'hoodies')));
  const ec=document.getElementById('exclusivesContainer');
  ec.innerHTML=''; exclusives.forEach((item,i)=>ec.appendChild(createItemHTML(item,i,'exclusives')));
}

document.getElementById('addHoodieBtn').addEventListener('click',()=>{hoodies.push({name:'',desc:'',price:'',img:''});renderItems();});
document.getElementById('addExclusiveBtn').addEventListener('click',()=>{exclusives.push({name:'',desc:'',price:'',img:''});renderItems();});

document.getElementById('saveBtn').addEventListener('click',()=>{
  localStorage.setItem('aboutText',document.getElementById('aboutText').value);
  localStorage.setItem('faqText',document.getElementById('faqText').value);
  localStorage.setItem('logoPreview',document.getElementById('logoPreview').src);
  hoodies=Array.from(document.getElementById('hoodiesContainer').children).map(div=>({
    name: div.querySelector('.itemName').value,
    desc: div.querySelector('.itemDesc').value,
    price: div.querySelector('.itemPrice').value,
    img: div.querySelector('.itemImagePreview').src
  }));
  exclusives=Array.from(document.getElementById('exclusivesContainer').children).map(div=>({
    name: div.querySelector('.itemName').value,
    desc: div.querySelector('.itemDesc').value,
    price: div.querySelector('.itemPrice').value,
    img: div.querySelector('.itemImagePreview').src
  }));
  localStorage.setItem('hoodiesItems',JSON.stringify(hoodies));
  localStorage.setItem('exclusivesItems',JSON.stringify(exclusives));
  alert('All changes saved!');
});

// Orders Log
function renderOrdersLog(){
  const tableBody=document.querySelector('#ordersTable tbody');
  const orders=JSON.parse(localStorage.getItem('ordersLog'))||[];
  tableBody.innerHTML='';
  orders.forEach(o=>{
    const row=document.createElement('tr');
    row.innerHTML=`<td>${o.timestamp}</td><td>${o.type}</td><td>${o.name}</td><td>${o.quantity}</td><td>$${o.price}</td><td>${o.delivery}</td>`;
    tableBody.appendChild(row);
  });
}
function updateSalesSummary(){
  const orders=JSON.parse(localStorage.getItem('ordersLog'))||[];
  let totalRevenue=0,totalHoodies=0,totalExclusives=0;
  orders.forEach(o=>{totalRevenue+=Number(o.price)*Number(o.quantity); if(o.type==='Hoodie') totalHoodies+=Number(o.quantity); if(o.type==='Exclusive') totalExclusives+=Number(o.quantity);});
  document.getElementById('totalOrders').textContent=orders.length;
  document.getElementById('totalRevenue').textContent=totalRevenue.toFixed(2);
  document.getElementById('totalHoodies').textContent=totalHoodies;
  document.getElementById('totalExclusives').textContent=totalExclusives;
}
function refreshOrders(){ renderOrdersLog(); updateSalesSummary(); }
setInterval(refreshOrders,2000);

// --- Customer App ---
function loadCustomerContent() {
  const logo = localStorage.getItem('logoPreview');
  if(logo) document.querySelector('#customerApp #logo').src = logo;
  const about = localStorage.getItem('aboutText');
  if(about) document.getElementById('about').innerHTML = about;
  const faq = localStorage.getItem('faqText');
  if(faq) document.getElementById('faq').innerHTML = faq;

  const hoodiesData = JSON.parse(localStorage.getItem('hoodiesItems')) || [];
  const hoodiesList = document.getElementById('hoodiesList');
  hoodiesList.innerHTML = '';
  hoodiesData.forEach(item => {
    const div = document.createElement('div'); div.classList.add('item');
    div.innerHTML = `<img src="${item.img}"><strong>${item.name}</strong><p>${item.desc}</p><p>Price: $${item.price}</p>`;
    const btn = document.createElement('button'); btn.textContent="Order Hoodie";
    btn.addEventListener('click',()=>placeOrder("Hoodie",item.name,item.price));
    div.appendChild(btn);
    hoodiesList.appendChild(div);
  });

  const exclusivesData = JSON.parse(localStorage.getItem('exclusivesItems')) || [];
  const exclusivesList = document.getElementById('exclusivesList');
  exclusivesList.innerHTML = '';
  exclusivesData.forEach(item => {
    const div = document.createElement('div'); div.classList.add('item');
    div.innerHTML = `<img src="${item.img}"><strong>${item.name}</strong><p>${item.desc}</p><p>Price: $${item.price}</p>`;
    const btn = document.createElement('button'); btn.textContent="Order Exclusive";
    btn.addEventListener('click',()=>placeOrder("Exclusive",item.name,item.price));
    div.appendChild(btn);
    exclusivesList.appendChild(div);
  });
}

function placeOrder(itemType,itemName,itemPrice){
  const quantity = prompt(`Enter quantity for ${itemName}:`,"1"); if(!quantity) return;
  const deliveryOption = prompt("Enter delivery method: Pickup Brooklyn (+$5) or Shipping","Pickup");
  const order = { type:itemType, name:itemName, price:itemPrice, quantity:quantity, delivery:deliveryOption, timestamp:new Date().toLocaleString() };
  let orders = JSON.parse(localStorage.getItem('ordersLog')) || [];
  orders.push(order); localStorage.setItem('ordersLog',JSON.stringify(orders));
  alert(`Order placed for ${quantity} x ${itemName}`);
}

function initCustomerApp(){ loadCustomerContent(); }
window.addEventListener('load',initCustomerApp);
setInterval(initCustomerApp,2000);

</script>
</body>
    </html>
  
