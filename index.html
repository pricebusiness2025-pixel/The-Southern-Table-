<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Southern Table</title>
<style>
  body {
    margin:0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f2f2f2; /* Light gray background */
    color: black;
  }
  h2,h3,h4 {
    background-color: #800020; /* Burgundy headers */
    color:white;
    padding:10px;
    border-radius:4px;
  }
  label, p { color:black; }
  table { width:100%; border-collapse: collapse; margin-bottom: 20px; background-color: #e0e0e0; }
  th, td { border:1px solid #999; padding:8px; text-align:center; }
  th { background-color: #800020; color:white; }
  input, select, textarea, button { margin:5px 0; padding:8px; font-family:inherit; }
  button {
    background-color:#800020;
    color:white;
    border:2px solid gold;
    cursor:pointer;
    padding:8px 12px;
    border-radius:4px;
  }
  button:hover { background-color:#a00030; }
  footer {
    position:sticky;
    bottom:0;
    background-color:#800020;
    color:white;
    padding:10px;
    text-align:center;
    border-top:2px solid gold;
  }
  .image-section img { max-width:100px; margin:5px; border:1px solid gold; }
  .carousel { display:flex; overflow-x:auto; gap:10px; padding:10px 0; }
</style>
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function(){emailjs.init("YOUR_PUBLIC_KEY");})();
</script>
</head>
<body>

<!-- ================= CUSTOMER CHECKOUT ================= -->
<section id="checkout">
  <h2>Checkout</h2>
  <form id="orderForm">
    <label>Full Name: <input type="text" id="name" required></label><br>
    <label>Phone: <input type="text" id="phone" required></label><br>

    <p>Select Size:</p>
    <label><input type="radio" name="hoodieSize" value="S" checked> S</label>
    <label><input type="radio" name="hoodieSize" value="M"> M</label>
    <label><input type="radio" name="hoodieSize" value="L"> L</label>
    <label><input type="radio" name="hoodieSize" value="XL"> XL</label>
    <label><input type="radio" name="hoodieSize" value="2XL"> 2XL (+$10)</label>
    <label><input type="radio" name="hoodieSize" value="3XL"> 3XL (+$10)</label><br><br>

    <p>Hoodie Color Selection (Max 10 per color):</p>
    <table id="bulkTable">
      <thead>
        <tr><th>Color</th><th>Quantity</th><th>Unit Price</th><th>Subtotal</th></tr>
      </thead>
      <tbody>
        <tr><td>Black</td><td><input type="number" class="colorQty" data-color="Black" min="0" max="10" value="0"></td><td>$75</td><td class="subTotal" id="subBlack">$0</td></tr>
        <tr><td>Burgundy</td><td><input type="number" class="colorQty" data-color="Burgundy" min="0" max="10" value="0"></td><td>$75</td><td class="subTotal" id="subBurgundy">$0</td></tr>
        <tr><td>Gold</td><td><input type="number" class="colorQty" data-color="Gold" min="0" max="10" value="0"></td><td>$75</td><td class="subTotal" id="subGold">$0</td></tr>
        <tr><td>Grey</td><td><input type="number" class="colorQty" data-color="Grey" min="0" max="10" value="0"></td><td>$75</td><td class="subTotal" id="subGrey">$0</td></tr>
      </tbody>
    </table>

    <label>Delivery Method:</label>
    <select id="delivery" required>
      <option value="pickup">In-Person Pickup (Melrose St. 11237) - $75</option>
      <option value="local">Local Brooklyn Delivery (+$5)</option>
      <option value="outside">Outside Brooklyn - Enter Direct Shipping Address</option>
    </select><br>

    <label>Special Notes / Substitutions:<br>
      <textarea id="notes"></textarea>
    </label><br>

    <p><strong>Payment:</strong> Single orders: Cash or CashApp | Bulk orders: CashApp only | Card coming soon</p>
    <p>Total: $<span id="grandTotal">0</span></p>
    <button type="button" onclick="saveOrder()">Save Order</button>
  </form>
</section>

<!-- ================= ADMIN PANEL ================= -->
<section id="admin">
  <h2>Admin Panel â€“ Saved Orders</h2>
  <form id="adminLoginForm">
    <label>Username: <input type="text" id="adminUsername" required></label><br>
    <label>Password: <input type="password" id="adminPassword" required></label><br>
    <label>4-digit PIN: <input type="password" id="adminPin" required maxlength="4"></label><br>
    <button type="button" onclick="adminLogin()">Log In</button>
  </form>
  <div id="adminContent" style="display:none;">
    <button onclick="loadOrders()">Load Orders</button>
    <button onclick="clearOrders()">Clear All Orders</button>
    <table id="ordersTable">
      <thead><tr><th>Order #</th><th>Name</th><th>Phone</th><th>Qty</th><th>Color</th><th>Unit Price</th><th>Total</th><th>Notes</th><th>Date</th></tr></thead>
      <tbody></tbody>
    </table>

    <!-- Image Management -->
    <h3>Image Management</h3>
    <div>
      <h4>Hoodies</h4>
      <input type="file" id="hoodieFiles" multiple accept="image/*">
      <textarea id="hoodieDesc" placeholder="Comma-separated descriptions"></textarea>
      <button onclick="saveHoodieImages()">Save Hoodie Images</button>
      <div id="hoodiePreview" class="carousel"></div>
    </div>
    <div>
      <h4>Exclusives</h4>
      <input type="file" id="exclusivesFiles" multiple accept="image/*">
      <textarea id="exclusivesDesc" placeholder="Comma-separated descriptions"></textarea>
      <button onclick="saveExclusivesImages()">Save Exclusives Images</button>
      <div id="exclusivesPreview" class="carousel"></div>
    </div>
    <div>
      <h4>Crunchy Thangs</h4>
      <input type="file" id="crunchyFiles" multiple accept="image/*">
      <textarea id="crunchyDesc" placeholder="Comma-separated descriptions"></textarea>
      <button onclick="saveCrunchyImages()">Save Crunchy Images</button>
      <div id="crunchyPreview" class="carousel"></div>
    </div>
  </div>
</section>

<!-- ================= STICKY FOOTER ================= -->
<footer>
  &copy; The Southern Table Est 2025 | Crunchy Thangs LLC 2024
</footer>

<script>
// Admin credentials hidden
const ADMIN_CREDS = { username:"thesoutherntable", password:"crunchythangs", pin:"1812" };

// Admin login
function adminLogin() {
  const u = document.getElementById("adminUsername").value;
  const p = document.getElementById("adminPassword").value;
  const pin = document.getElementById("adminPin").value;
  if(u===ADMIN_CREDS.username && p===ADMIN_CREDS.password && pin===ADMIN_CREDS.pin){
    document.getElementById("adminLoginForm").style.display="none";
    document.getElementById("adminContent").style.display="block";
    alert("Admin access granted!");
  } else alert("Incorrect login credentials or PIN!");
}

// Update totals
function updateTotals(){
  let colors=["Black","Burgundy","Gold","Grey"];
  let size=document.querySelector('input[name="hoodieSize"]:checked').value;
  let grandTotal=0;
  colors.forEach(color=>{
    let qty=parseInt(document.querySelector(`.colorQty[data-color="${color}"]`).value)||0;
    let unit=75;if(size==="2XL"||size==="3XL")unit+=10;
    let sub=qty*unit;document.getElementById("sub"+color).innerText="$"+sub;grandTotal+=sub;
  });
  let delivery=document.getElementById("delivery").value;
  if(delivery==="local")grandTotal+=5;
  document.getElementById("grandTotal").innerText=grandTotal;
}
document.querySelectorAll(".colorQty, input[name='hoodieSize'], #delivery").forEach(el=>el.addEventListener("input",updateTotals));

// Save order with EmailJS
function saveOrder(){
  updateTotals();
  const orderData={
    orderNumber:Date.now(),
    name:document.getElementById("name").value,
    phone:document.getElementById("phone").value,
    colors:{},
    size:document.querySelector('input[name="hoodieSize"]:checked').value,
    delivery:document.getElementById("delivery").value,
    notes:document.getElementById("notes").value,
    total:document.getElementById("grandTotal").innerText
  };
  ["Black","Burgundy","Gold","Grey"].forEach(c=>orderData.colors[c]=parseInt(document.querySelector(`.colorQty[data-color="${c}"]`).value)||0);
  emailjs.send('service_xpjp0i7','YOUR_TEMPLATE_ID',{
    to_email:'pricebusiness2025@gmail.com',
    orderNumber:orderData.orderNumber,
    name:orderData.name,
    phone:orderData.phone,
    size:orderData.size,
    colors:JSON.stringify(orderData.colors),
    delivery:orderData.delivery,
    notes:orderData.notes,
    total:orderData.total
  }).then(()=>{alert("Order sent successfully!")},(err)=>{alert("Error sending order: "+err.text)});
}

// Placeholder functions for loading/saving images
function saveHoodieImages(){alert("Hoodie images saved (mock)");}
function saveExclusivesImages(){alert("Exclusives images saved (mock)");}
function saveCrunchyImages(){alert("Crunchy images saved (mock)");}

function loadOrders(){alert("Load orders function (mock)");}
function clearOrders(){alert("Clear all orders function (mock)");}
</script>

</body>
</html>
