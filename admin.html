<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Southern Table - Admin</title>
<style>
body{font-family:sans-serif;margin:0;padding:0;background:#800020;color:#fff;}
header{background:#800020;color:#fff;padding:10px;text-align:center;}
.tab-buttons{display:flex;justify-content:center;background:#500010;}
.tab-buttons button{flex:1;padding:10px;margin:2px;background:#800020;color:#fff;border:1px solid gold;cursor:pointer;font-weight:bold;}
.tab-content{padding:20px;display:none;}
input,textarea{display:block;margin:10px 0;padding:5px;width:100%;}
.thumbnail{height:80px;margin:5px;border:1px solid #fff;}
</style>
</head>
<body>

<header>
<h1>The Southern Table - Admin Panel</h1>
</header>

<!-- Admin Login Screen -->
<div id="loginScreen">
<h2>Admin Login</h2>
<input type="password" id="adminPassword" placeholder="Password">
<input type="text" id="adminPin" placeholder="Pin">
<button onclick="checkAdminLogin()">Login</button>
<div id="loginMsg" style="color:red;margin-top:10px;"></div>
</div>

<!-- Admin Tabs -->
<div id="adminPanel" style="display:none;">
<div class="tab-buttons">
<button onclick="openTab('headerFooter')">Header/Footer</button>
<button onclick="openTab('hoodies')">Hoodies</button>
<button onclick="openTab('exclusives')">Exclusives</button>
<button onclick="openTab('checkout')">Checkout</button>
</div>

<div id="headerFooter" class="tab-content">
<h2>Header Image</h2>
<input type="file" id="headerImageInput">
<button onclick="saveHeaderImage()">Save Header</button>
<div id="headerPreview"></div>

<h2>Footer Image</h2>
<input type="file" id="footerImageInput">
<button onclick="saveFooterImage()">Save Footer</button>
<div id="footerPreview"></div>
</div>

<div id="hoodies" class="tab-content">
<h2>Hoodie Selection</h2>
<textarea id="hoodieDesc" placeholder="Enter hoodie description here..."></textarea>
<input type="file" id="hoodieImageInput" multiple>
<button onclick="saveHoodieSelection()">Save Hoodie Info</button>
<div id="hoodiePreview"></div>
</div>

<div id="exclusives" class="tab-content">
<h2>Exclusives</h2>
<textarea id="exclusiveDesc" placeholder="Enter exclusive description here..."></textarea>
<input type="file" id="exclusiveImageInput" multiple>
<button onclick="saveExclusiveSelection()">Save Exclusives</button>
<div id="exclusivePreview"></div>
</div>

<div id="checkout" class="tab-content">
<h2>Checkout - CashApp QR</h2>
<input type="file" id="checkoutQR">
<button onclick="saveCheckoutQR()">Save QR</button>
<div id="checkoutPreview"></div>
</div>
</div>

<script>
// Admin credentials
const ADMIN_PASSWORD = 'crunchythangs';
const ADMIN_PIN = '1812';

// Login function
function checkAdminLogin(){
  const pw = document.getElementById('adminPassword').value;
  const pin = document.getElementById('adminPin').value;
  const msg = document.getElementById('loginMsg');
  if(pw === ADMIN_PASSWORD && pin === ADMIN_PIN){
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'block';
    openTab('headerFooter');
  } else {
    msg.innerText = "Incorrect password or pin.";
  }
}

// Tab switching
function openTab(tabId){
  const tabs = document.querySelectorAll('.tab-content');
  tabs.forEach(tab => tab.style.display = 'none');
  document.getElementById(tabId).style.display = 'block';
}

// Multiple images handler
function saveMultipleImages(fileInputId, storageKey, descInputId, previewId){
  const files = document.getElementById(fileInputId).files;
  const desc = descInputId ? document.getElementById(descInputId).value : '';
  let existingData = JSON.parse(localStorage.getItem(storageKey)) || {desc:'', images:[]};
  const preview = document.getElementById(previewId);

  for(let f of files){
    const reader = new FileReader();
    reader.onload = function(e){
      existingData.images.push(e.target.result);
      existingData.desc = desc;
      localStorage.setItem(storageKey, JSON.stringify(existingData));
      const img = document.createElement('img');
      img.src = e.target.result;
      img.className = 'thumbnail';
      preview.appendChild(img);
    }
    reader.readAsDataURL(f);
  }
}

// Wrapper functions
function saveHoodieSelection(){ saveMultipleImages('hoodieImageInput','hoodieData','hoodieDesc','hoodiePreview'); }
function saveExclusiveSelection(){ saveMultipleImages('exclusiveImageInput','exclusiveData','exclusiveDesc','exclusivePreview'); }
function saveHeaderImage(){ saveMultipleImages('headerImageInput','headerData',null,'headerPreview'); }
function saveFooterImage(){ saveMultipleImages('footerImageInput','footerData',null,'footerPreview'); }
function saveCheckoutQR(){ saveMultipleImages('checkoutQR','checkoutData',null,'checkoutPreview'); }
</script>

</body>
</html>
