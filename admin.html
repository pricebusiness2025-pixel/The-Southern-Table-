<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Southern Table - Admin</title>
<style>
  body { font-family:'Sans-serif'; margin:0; padding:0; background:#800020; color:white; }
  header { background:#800020; padding:10px; text-align:center; }
  header img { max-height:60px; }
  nav { display:flex; justify-content:center; background:#800020; }
  nav button { background:#800020; color:white; border:2px solid gold; margin:5px; padding:10px; cursor:pointer; }
  nav button.active { background:gold; color:#800020; }
  section { padding:20px; display:none; }
  .visible { display:block; }
  input, textarea { width:90%; margin-bottom:10px; padding:5px; }
  .product-grid { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:20px; }
  .product-card { background:#fff; color:#000; padding:10px; flex:1 0 150px; text-align:center; border-radius:8px; }
  .product-card img { width:100%; border-radius:5px; }
  button.upload-btn { margin-top:5px; }
  .sticky-footer { position:sticky; bottom:0; background:#800020; color:white; text-align:center; padding:10px; border-top:2px solid gold; }
</style>
</head>
<body>

<header>
  <h1>The Southern Table - Admin</h1>
</header>

<!-- Login -->
<section id="login-section" class="visible">
  <h2>Admin Login</h2>
  <label>Password: <input type="password" id="admin-pw"></label><br>
  <label>Pin: <input type="number" id="admin-pin"></label><br>
  <button id="login-btn">Login</button>
  <p id="login-msg" style="color:red;"></p>
</section>

<!-- Admin Tabs -->
<section id="admin-section">
  <nav>
    <button data-tab="admin-hoodies" class="active">Hoodies</button>
    <button data-tab="admin-exclusives">Exclusives</button>
    <button data-tab="admin-mission">Mission/FAQ</button>
    <button data-tab="admin-checkout">Checkout Settings</button>
  </nav>

  <!-- Hoodies -->
  <section id="admin-hoodies" class="visible">
    <h2>Hoodies Upload</h2>
    <input type="file" id="hoodie-upload" multiple><br>
    <div class="product-grid" id="admin-hoodie-grid"></div>
  </section>

  <!-- Exclusives -->
  <section id="admin-exclusives">
    <h2>Exclusives Upload</h2>
    <input type="file" id="exclusive-upload" multiple><br>
    <div class="product-grid" id="admin-exclusive-grid"></div>
  </section>

  <!-- Mission / FAQ -->
  <section id="admin-mission">
    <h2>Mission & FAQ Editor</h2>
    <textarea id="mission-text" rows="5" placeholder="Mission text"></textarea><br>
    <textarea id="faq-text" rows="10" placeholder="FAQ text"></textarea><br>
    <button id="save-mission-btn">Save Mission/FAQ</button>
  </section>

  <!-- Checkout Settings -->
  <section id="admin-checkout">
    <h2>Checkout Settings</h2>
    <label>Header Logo: <input type="file" id="header-logo-upload"></label><br>
    <label>CashApp QR: <input type="file" id="cashapp-qr-upload"></label><br>
    <button id="save-checkout-btn">Save Images</button>
  </section>
</section>

<div class="sticky-footer">
  &copy; The Southern Table Est 2025 - Crunchy Thangs LLC 2024
</div>

<script>
const ADMIN_PW = 'crunchy';
const ADMIN_PIN = '1812';

const loginSection = document.getElementById('login-section');
const adminSection = document.getElementById('admin-section');
const loginBtn = document.getElementById('login-btn');
const loginMsg = document.getElementById('login-msg');

// Login check
loginBtn.addEventListener('click', () => {
  const pw = document.getElementById('admin-pw').value;
  const pin = document.getElementById('admin-pin').value;
  if(pw === ADMIN_PW && pin === ADMIN_PIN){
    loginSection.style.display='none';
    adminSection.style.display='block';
    loadAdminImages();
    loadMissionFAQ();
  } else {
    loginMsg.textContent='Incorrect password or pin';
  }
});

// Tabs
const tabs = document.querySelectorAll('nav button');
const sections = document.querySelectorAll('#admin-section > section');
tabs.forEach(btn => {
  btn.addEventListener('click', () => {
    tabs.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    sections.forEach(s => s.classList.remove('visible'));
    document.getElementById(btn.dataset.tab).classList.add('visible');
  });
});

// Upload and save images
function handleUpload(inputId, storageKey, gridId){
  const input = document.getElementById(inputId);
  input.addEventListener('change', () => {
    const files = Array.from(input.files);
    const saved = JSON.parse(localStorage.getItem(storageKey)||'[]');
    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = (e)=>{
        saved.push({url:e.target.result, name:file.name});
        localStorage.setItem(storageKey, JSON.stringify(saved));
        loadAdminImages();
      }
      reader.readAsDataURL(file);
    });
  });
}

function loadAdminImages(){
  const hoodies = JSON.parse(localStorage.getItem('adminHoodies')||'[]');
  const exclusives = JSON.parse(localStorage.getItem('adminExclusives')||'[]');
  const hoodieGrid = document.getElementById('admin-hoodie-grid');
  const exclusiveGrid = document.getElementById('admin-exclusive-grid');
  hoodieGrid.innerHTML=''; exclusivesGrid.innerHTML='';
  hoodies.forEach(h=>{
    const div = document.createElement('div'); div.className='product-card';
    div.innerHTML=`<img src="${h.url}" alt="${h.name}"><p>${h.name}</p>`;
    hoodieGrid.appendChild(div);
  });
  exclusives.forEach(e=>{
    const div = document.createElement('div'); div.className='product-card';
    div.innerHTML=`<img src="${e.url}" alt="${e.name}"><p>${e.name}</p>`;
    exclusiveGrid.appendChild(div);
  });
}

// Image upload handlers
handleUpload('hoodie-upload','adminHoodies','admin-hoodie-grid');
handleUpload('exclusive-upload','adminExclusives','admin-exclusive-grid');

// Header logo and QR upload
document.getElementById('save-checkout-btn').addEventListener('click',()=>{
  const logoInput=document.getElementById('header-logo-upload').files[0];
  const qrInput=document.getElementById('cashapp-qr-upload').files[0];
  if(logoInput){
    const reader=new FileReader();
    reader.onload=(e)=>{localStorage.setItem('headerLogo',e.target.result);}
    reader.readAsDataURL(logoInput);
  }
  if(qrInput){
    const reader=new FileReader();
    reader.onload=(e)=>{localStorage.setItem('cashappQR',e.target.result);}
    reader.readAsDataURL(qrInput);
  }
  alert('Checkout images saved!');
});

// Mission / FAQ save
document.getElementById('save-mission-btn').addEventListener('click',()=>{
  const mission=document.getElementById('mission-text').value;
  const faq=document.getElementById('faq-text').value;
  localStorage.setItem('missionText',mission);
  localStorage.setItem('faqText',faq);
  alert('Mission and FAQ saved!');
});

function loadMissionFAQ(){
  document.getElementById('mission-text').value = localStorage.getItem('missionText')||'High-quality, comfortable hoodiesâ€”available year-round with rustic style...';
  document.getElementById('faq-text').value = localStorage.getItem('faqText')||'Sample FAQ text';
}
</script>

</body>
</html>
