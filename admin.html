<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Gallery Manager</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    form { margin-bottom: 20px; }
    button { margin-left: 10px; }
</style>
</head>
<body>

<h1>Admin Gallery Manager</h1>

<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="photos" multiple>
    <button type="submit">Upload</button>
</form>

<h2>Existing Images</h2>
<div id="adminGallery"></div>

<script src="images_list.js"></script>
<script>
const adminGallery = document.getElementById('adminGallery');

function loadAdminGallery() {
    adminGallery.innerHTML = '';
    images.forEach(filename => {
        const div = document.createElement('div');
        div.textContent = filename;
        const btn = document.createElement('button');
        btn.textContent = 'Delete';
        btn.onclick = () => {
            fetch('/delete', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({filename})
            }).then(() => loadAdminGallery());
        };
        div.appendChild(btn);
        adminGallery.appendChild(div);
    });
}

loadAdminGallery();

document.getElementById('uploadForm').onsubmit = e => {
    e.preventDefault();
    const formData = new FormData(e.target);
    fetch('/upload', { method: 'POST', body: formData })
        .then(() => {
            loadAdminGallery();
            e.target.reset();
        });
};
</script>

</body>
</html>
