<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Southern Table Admin</title>
<style>
  body { background-color: #800020; color: #fff; font-family: 'Sans-serif', elegant; margin:0; padding:0; }
  h2 { color:black; }
  h3 { color:white; }
  button { background-color:#800020; color:white; border:2px solid gold; padding:5px 10px; margin:5px; cursor:pointer; }
  .thumbnail { width:100px; height:100px; object-fit:cover; margin:5px; border:1px solid #ccc; }
  .tab { display:none; padding:20px; }
  .tab.active { display:block; }
  .tabs button { margin-right:10px; }
  #headerImg, #footerImg { max-width:200px; max-height:100px; display:block; margin-bottom:10px; }
</style>
</head>
<body>

<!-- Login -->
<section id="loginScreen">
  <h2>Admin Login</h2>
  <input type="password" id="adminPassword" placeholder="Password">
  <input type="number" id="adminPin" placeholder="4-digit PIN">
  <button id="loginBtn">Login</button>
</section>

  <!-- Admin Portal -->
<section id="adminPortal" style="display:none;">
  <h2>The Southern Table Admin</h2>
  
  <!-- Tabs -->
  <div class="tabs">
    <button onclick="openTab('missionTab')">Mission & Goals</button>
    <button onclick="openTab('faqTab')">FAQ</button>
    <button onclick="openTab('hoodiesTab')">Hoodies</button>
    <button onclick="openTab('exclusivesTab')">Exclusives</button>
    <button onclick="openTab('crunchyTab')">Crunchy Thangs</button>
    <button onclick="openTab('checkoutTab')">Checkout</button>
  </div>

  <!-- Mission & Goals -->
  <div id="missionTab" class="tab">
    <h3>Mission</h3>
    <textarea id="missionText" rows="5" style="width:100%"></textarea>
    <h3>Goals</h3>
    <textarea id="goalsText" rows="5" style="width:100%"></textarea>
    <button onclick="saveText('mission')">Save</button>
  </div>

  <!-- FAQ -->
  <div id="faqTab" class="tab">
    <textarea id="faqText" rows="15" style="width:100%"></textarea>
    <button onclick="saveText('faq')">Save FAQ</button>
  </div>

  <!-- Hoodies -->
  <div id="hoodiesTab" class="tab">
    <h3>Hoodie Images</h3>
    <input type="file" id="hoodieUpload" multiple>
    <div id="adminHoodieImages"></div>
    <button onclick="saveImages('hoodie')">Save Hoodies</button>
  </div>

  <!-- Exclusives -->
  <div id="exclusivesTab" class="tab">
    <h3>Exclusive Images</h3>
    <input type="file" id="exclusiveUpload" multiple>
    <div id="adminExclusiveImages"></div>
    <button onclick="saveImages('exclusive')">Save Exclusives</button>
  </div>

  <!-- Crunchy Thangs -->
  <div id="crunchyTab" class="tab">
    <h3>Crunchy Thangs Images</h3>
    <input type="file" id="crunchyUpload" multiple>
    <div id="adminCrunchyImages"></div>
    <button onclick="saveImages('crunchy')">Save Crunchy Thangs</button>
  </div>

  <!-- Checkout -->
  <div id="checkoutTab" class="tab">
    <h3>CashApp QR / Checkout Info</h3>
    <input type="file" id="cashAppUpload">
    <img id="cashAppImg" src="" alt="CashApp QR" style="max-width:200px; max-height:200px; display:block;">
    <button onclick="saveCashApp()">Save QR</button>
  </div>
      </section>

  <script>
const ADMIN_PASSWORD="crunchythangs";
const ADMIN_PIN=1812;

document.getElementById('loginBtn').onclick=function(){
  const pw=document.getElementById('adminPassword').value;
  const pin=parseInt(document.getElementById('adminPin').value);
  if(pw===ADMIN_PASSWORD && pin===ADMIN_PIN){
    document.getElementById('loginScreen').style.display='none';
    document.getElementById('adminPortal').style.display='block';
    loadAllData();
    openTab('missionTab');
  } else {
    alert('Incorrect password or PIN.');
  }
};

function openTab(tabId){
  const tabs=document.querySelectorAll('.tab');
  tabs.forEach(t=>t.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
}

// Save text content
function saveText(type){
  let val='';
  if(type==='mission') val=document.getElementById('missionText').value;
  if(type==='goals') val=document.getElementById('goalsText').value;
  if(type==='faq') val=document.getElementById('faqText').value;
  localStorage.setItem(type+'Data', val);
  alert('Saved!');
}

// Image Upload & Display
function saveImages(type){
  const input=document.getElementById(type+'Upload');
  const files=input.files;
  const dataKey=type+'Data';
  let data=JSON.parse(localStorage.getItem(dataKey)) || {images:[], desc:''};
  Array.from(files).forEach(file=>{
    const reader=new FileReader();
    reader.onload=(e)=>{
      data.images.push(e.target.result);
      localStorage.setItem(dataKey, JSON.stringify(data));
      loadAdminImages(type,'admin'+capitalize(type)+'Images');
    };
    reader.readAsDataURL(file);
  });
}

function loadAdminImages(type,containerId){
  const dataKey=type+'Data';
  const data=JSON.parse(localStorage.getItem(dataKey)) || {images:[],desc:''};
  const container=document.getElementById(containerId);
  container.innerHTML='';
  data.images.forEach((src,idx)=>{
    const div=document.createElement('div');
    div.style.display='inline-block';
    const img=document.createElement('img');
    img.src=src;
    img.className='thumbnail';
    const btn=document.createElement('button');
    btn.innerText='Delete';
    btn.onclick=()=>{
      if(confirm('Delete this image?')){
        data.images.splice(idx,1);
        localStorage.setItem(dataKey,JSON.stringify(data));
        loadAdminImages(type,containerId);
      }
    };
    div.appendChild(img);
    div.appendChild(btn);
    container.appendChild(div);
  });
}

// CashApp QR
document.getElementById('cashAppUpload').onchange=function(){
  const file=this.files[0];
  const reader=new FileReader();
  reader.onload=function(e){
    document.getElementById('cashAppImg').src=e.target.result;
    localStorage.setItem('cashAppData', e.target.result);
  }
  reader.readAsDataURL(file);
};

function saveCashApp(){
  alert('CashApp QR saved!');
}

// Load all stored data
function loadAllData(){
  document.getElementById('missionText').value=localStorage.getItem('missionData') || '';
  document.getElementById('goalsText').value=localStorage.getItem('goalsData') || '';
  document.getElementById('faqText').value=localStorage.getItem('faqData') || '';
  loadAdminImages('hoodie','adminHoodieImages');
  loadAdminImages('exclusive','adminExclusiveImages');
  loadAdminImages('crunchy','adminCrunchyImages');
  document.getElementById('cashAppImg').src=localStorage.getItem('cashAppData') || '';
}

function capitalize(str){ return str.charAt(0).toUpperCase()+str.slice(1);}
</script>
</body>
</html>
